local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer
local guiSaveKey = "GuiPos_" .. player.UserId
local TELEPORT_DISTANCE = 8

-- ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á GUI
local guiPos = nil
pcall(function()
	local val = player:WaitForChild("PlayerGui"):FindFirstChild(guiSaveKey)
	if val then
		guiPos = HttpService:JSONDecode(val.Value)
	end
end)

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á GUI ‡∏´‡∏•‡∏±‡∏Å
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MainGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 480, 0, 360)
frame.Position = guiPos and UDim2.new(0, guiPos.x, 0, guiPos.y) or UDim2.new(0.5, -240, 0.5, -180)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)

local shadow = Instance.new("ImageLabel")
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://1316045217"
shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
shadow.ImageTransparency = 0.5
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(10, 10, 118, 118)
shadow.Size = frame.Size + UDim2.new(0, 20, 0, 20)
shadow.Position = frame.Position + UDim2.new(0, -10, 0, -10)
shadow.ZIndex = 0
shadow.Parent = frame

local banner = Instance.new("Frame")
banner.Size = UDim2.new(1, 0, 0.12, 0)
banner.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
banner.Parent = frame
Instance.new("UICorner", banner).CornerRadius = UDim.new(0, 12)

local bannerText = Instance.new("TextLabel")
bannerText.Size = UDim2.new(1, 0, 1, 0)
bannerText.BackgroundTransparency = 1
bannerText.Text = "‚ú® AKB akibus shop v0.7"
bannerText.TextColor3 = Color3.new(1, 1, 1)
bannerText.Font = Enum.Font.GothamBold
bannerText.TextSize = 20
bannerText.Parent = banner

local label = Instance.new("TextLabel")
label.Size = UDim2.new(0.5, -20, 0.1, 0)
label.Position = UDim2.new(0, 10, 0.14, 0)
label.BackgroundTransparency = 1
label.Text = "üìü Auto Rejoin System"
label.TextColor3 = Color3.new(1, 1, 1)
label.TextSize = 16
label.Font = Enum.Font.GothamBold
label.Parent = frame

local searchBox = Instance.new("TextBox")
searchBox.Size = UDim2.new(0.45, -10, 0.08, 0)
searchBox.Position = UDim2.new(0.55, 10, 0.14, 0)
searchBox.PlaceholderText = "üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô"
searchBox.TextColor3 = Color3.new(1, 1, 1)
searchBox.TextSize = 14
searchBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
searchBox.Font = Enum.Font.Gotham
searchBox.ClearTextOnFocus = false
searchBox.Text = ""
searchBox.Parent = frame
Instance.new("UICorner", searchBox).CornerRadius = UDim.new(0, 8)

local afkDetectToggle = true -- ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
local afkBtn = Instance.new("TextButton")
afkBtn.Size = UDim2.new(0.5, -20, 0.12, 0)
afkBtn.Position = UDim2.new(0, 10, 0.24, 0)
afkBtn.BackgroundColor3 = Color3.fromRGB(255, 170, 0)
afkBtn.TextColor3 = Color3.new(1, 1, 1)
afkBtn.Font = Enum.Font.GothamBold
afkBtn.TextSize = 16
afkBtn.Text = "üü¢ AFK Detect: ON"
afkBtn.Parent = frame
Instance.new("UICorner", afkBtn).CornerRadius = UDim.new(0, 14)

local afkTimerLabel = Instance.new("TextLabel")
afkTimerLabel.Size = UDim2.new(0.5, -20, 0.08, 0)
afkTimerLabel.Position = UDim2.new(0, 10, 0.37, 0) -- ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ‡∏õ‡∏∏‡πà‡∏° AFK
afkTimerLabel.BackgroundTransparency = 1
afkTimerLabel.Text = "üïí Time left: ‚àû"
afkTimerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
afkTimerLabel.TextSize = 14
afkTimerLabel.Font = Enum.Font.Gotham
afkTimerLabel.TextXAlignment = Enum.TextXAlignment.Left
afkTimerLabel.Parent = frame

afkBtn.MouseButton1Click:Connect(function()
	afkDetectToggle = not afkDetectToggle
	afkBtn.Text = afkDetectToggle and "üü¢ AFK Detect: ON" or "üî¥ AFK Detect: OFF"
end)

local teleportBtn = Instance.new("TextButton")
teleportBtn.Size = UDim2.new(0.5, -20, 0.12, 0)
teleportBtn.Position = UDim2.new(0, 10, 0.50, 0)
teleportBtn.BackgroundColor3 = Color3.fromRGB(0, 128, 255)
teleportBtn.Text = "üîÅ Change Server"
teleportBtn.TextColor3 = Color3.new(1, 1, 1)
teleportBtn.Font = Enum.Font.GothamBold
teleportBtn.TextSize = 16
teleportBtn.Parent = frame
Instance.new("UICorner", teleportBtn).CornerRadius = UDim.new(0, 14)

local playerListFrame = Instance.new("ScrollingFrame")
playerListFrame.Size = UDim2.new(0.45, -10, 0.56, 0)
playerListFrame.Position = UDim2.new(0.55, 10, 0.24, 0)
playerListFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
playerListFrame.BorderSizePixel = 0
playerListFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
playerListFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
playerListFrame.ScrollBarThickness = 6
playerListFrame.Parent = frame
Instance.new("UICorner", playerListFrame).CornerRadius = UDim.new(0, 10)

local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Parent = playerListFrame
uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder
uiListLayout.Padding = UDim.new(0, 4)

local stopFollowBtn = Instance.new("TextButton")
stopFollowBtn.Size = UDim2.new(0.45, -10, 0.1, 0)
stopFollowBtn.Position = UDim2.new(0.55, 10, 0.83, 0)
stopFollowBtn.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
stopFollowBtn.Text = "‚úã ‡∏´‡∏¢‡∏∏‡∏î‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"
stopFollowBtn.TextColor3 = Color3.new(1, 1, 1)
stopFollowBtn.Font = Enum.Font.GothamBold
stopFollowBtn.TextSize = 16
stopFollowBtn.Parent = frame
Instance.new("UICorner", stopFollowBtn).CornerRadius = UDim.new(0, 14)

local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0, 30, 0, 30)
toggleBtn.Position = UDim2.new(0, 10, 0, 10)
toggleBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.Text = "-"
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 20
toggleBtn.Parent = screenGui
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(0, 8)

local roomIdInput = Instance.new("TextBox")
roomIdInput.Size = UDim2.new(0.5, -20, 0.08, 0)
roomIdInput.Position = UDim2.new(0, 10, 0.73, 0)
roomIdInput.PlaceholderText = "‚úèÔ∏è ‡πÉ‡∏™‡πà Room ID"
roomIdInput.TextColor3 = Color3.new(1, 1, 1)
roomIdInput.TextSize = 14
roomIdInput.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
roomIdInput.Font = Enum.Font.Gotham
roomIdInput.ClearTextOnFocus = false
roomIdInput.Text = ""
roomIdInput.Parent = frame
Instance.new("UICorner", roomIdInput).CornerRadius = UDim.new(0, 8)

local roomIdLabel = Instance.new("TextButton")
roomIdLabel.Size = UDim2.new(0.5, -20, 0.08, 0)
roomIdLabel.Position = UDim2.new(0, 10, 0.63, 0)
roomIdLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
roomIdLabel.TextColor3 = Color3.new(1, 1, 1)
roomIdLabel.Font = Enum.Font.Gotham
roomIdLabel.TextSize = 14
roomIdLabel.Text = "Room ID: " .. tostring(game.JobId)
roomIdLabel.TextWrapped = true
roomIdLabel.Parent = frame
Instance.new("UICorner", roomIdLabel).CornerRadius = UDim.new(0, 8)

local joinByIdBtn = Instance.new("TextButton")
joinByIdBtn.Size = UDim2.new(0.5, -20, 0.12, 0)
joinByIdBtn.Position = UDim2.new(0, 10, 0.83, 0)
joinByIdBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
joinByIdBtn.Text = "üîë Join by Room ID"
joinByIdBtn.TextColor3 = Color3.new(1, 1, 1)
joinByIdBtn.Font = Enum.Font.GothamBold
joinByIdBtn.TextSize = 16
joinByIdBtn.Parent = frame
Instance.new("UICorner", joinByIdBtn).CornerRadius = UDim.new(0, 14)

joinByIdBtn.MouseButton1Click:Connect(function()
	local roomId = roomIdInput.Text
	if roomId and roomId ~= "" then
		TeleportService:TeleportToPlaceInstance(game.PlaceId, roomId, player)
	end
end)

roomIdLabel.MouseButton1Click:Connect(function()
	setclipboard(game.JobId)
	roomIdLabel.Text = "üìã Copied Room ID!"
	task.delay(1.5, function()
		roomIdLabel.Text = "Room ID: " .. tostring(game.JobId)
	end)
end)

toggleBtn.MouseButton1Click:Connect(function()
	frame.Visible = not frame.Visible
	toggleBtn.Text = frame.Visible and "-" or "+"
end)

frame:GetPropertyChangedSignal("Position"):Connect(function()
	local pos = frame.Position
	local saveVal = player:WaitForChild("PlayerGui"):FindFirstChild(guiSaveKey)
	if not saveVal then
		saveVal = Instance.new("StringValue")
		saveVal.Name = guiSaveKey
		saveVal.Parent = player:WaitForChild("PlayerGui")
	end
	saveVal.Value = HttpService:JSONEncode({ x = pos.X.Offset, y = pos.Y.Offset })
end)

local function teleportToSmallestServer()
	local success, servers = pcall(function()
		return HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"))
	end)
	if success and servers and servers.data then
		for _, s in ipairs(servers.data) do
			if s.playing < s.maxPlayers then
				TeleportService:TeleportToPlaceInstance(game.PlaceId, s.id, player)
				break
			end
		end
	end
end

teleportBtn.MouseButton1Click:Connect(teleportToSmallestServer)

local running = false
local conn

local function formatTime(t)
	local m = math.floor(t / 60)
	local s = math.floor(t % 60)
	return string.format("%02d:%02d", m, s)
end

local lastPosition = nil
local lastMoveTime = os.clock()

RunService.Heartbeat:Connect(function()
	if not afkDetectToggle then return end
	if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end

	local currentPos = player.Character.HumanoidRootPart.Position
	if lastPosition then
		if (currentPos - lastPosition).magnitude > 0.1 then
			lastMoveTime = os.clock()
		end
	end
	lastPosition = currentPos

	local timeLeft = 20 - (os.clock() - lastMoveTime)
	afkTimerLabel.Text = "üïí Time left: " .. math.max(0, math.floor(timeLeft)) .. "s"

	if os.clock() - lastMoveTime >= 20 then
		-- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏Ç‡∏¢‡∏±‡∏ö 20 ‡∏ß‡∏¥ ‡πÉ‡∏´‡πâ‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü
		lastMoveTime = os.clock() + 999 -- ‡∏Å‡∏±‡∏ô‡∏ß‡∏ô‡∏ã‡πâ‡∏≥
		teleportToSmallestServer()
	end
end)
-- ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏ô‡∏≠‡∏≠‡πÇ‡∏ï‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏ö‡∏ö‡∏´‡∏•‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡πÜ

local humanoid
local rootPart
local currentTarget

local followConnection

local MOVE_STEP = 3 -- ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏Å‡πâ‡∏≤‡∏ß (studs)
local RAY_DISTANCE = 3 -- ‡∏£‡∏∞‡∏¢‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤
local STEP_DELAY = 0.2
local CLIMB_HEIGHT = 30

local function stopFollowing()
	if followConnection then
		followConnection:Disconnect()
		followConnection = nil
	end
	if humanoid then
		humanoid:MoveTo(rootPart.Position)
	end
	currentTarget = nil
end

local function isObstacleAhead(position, direction)
	local raycastParams = RaycastParams.new()
	raycastParams.FilterDescendantsInstances = {player.Character}
	raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
	raycastParams.IgnoreWater = true

	local raycastResult = workspace:Raycast(position, direction * RAY_DISTANCE, raycastParams)
	return raycastResult ~= nil
end

local function isObstacleAhead(position, direction)
	local raycastParams = RaycastParams.new()
	raycastParams.FilterDescendantsInstances = {player.Character}
	raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
	raycastParams.IgnoreWater = true

	local raycastResult = workspace:Raycast(position, direction * MOVE_STEP, raycastParams)
	return raycastResult ~= nil
end

local function followPlayer(targetPlayer)
	stopFollowing()

	if not targetPlayer or not targetPlayer.Character then return end

	local myChar = player.Character or player.CharacterAdded:Wait()
	humanoid = myChar:FindFirstChildOfClass("Humanoid")
	rootPart = myChar:FindFirstChild("HumanoidRootPart")
	if not humanoid or humanoid.Health <= 0 or not rootPart then return end

	currentTarget = targetPlayer
	local moveTimer = 0

	followConnection = RunService.Heartbeat:Connect(function(dt)
	moveTimer += dt
	if moveTimer < STEP_DELAY then return end
	moveTimer = 0

	if not currentTarget or not currentTarget.Character or humanoid.Health <= 0 then
		stopFollowing()
		return
	end

    	local targetRoot = currentTarget.Character:FindFirstChild("HumanoidRootPart")
    	if not targetRoot then
	    	stopFollowing()
	    	return
	    end

    	local directionVector = (targetRoot.Position - rootPart.Position)
    	local distance = directionVector.Magnitude

    if distance <= 5 then
        return -- ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏û‡∏≠
    end

    if distance <= TELEPORT_DISTANCE then
	    -- ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏°‡∏≤‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡∏ö‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≤), ‡πÉ‡∏´‡πâ‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏•‡∏á
    	if rootPart.Position.Y - targetRoot.Position.Y > 20 then
    		rootPart.CFrame = CFrame.new(targetRoot.Position + Vector3.new(0, 4, 0))
    	else
	    	-- ‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
	    	rootPart.CFrame = CFrame.new(targetRoot.Position + Vector3.new(0, 5, 0))
	    end
	    return
    end
	local direction = directionVector.Unit

	    if isObstacleAhead(rootPart.Position, direction) then
	    	local climbPosition = rootPart.Position + Vector3.new(0, CLIMB_HEIGHT, 0)
	    	rootPart.CFrame = CFrame.new(climbPosition, targetRoot.Position)
    	else
	    	local newPosition = rootPart.Position + direction * MOVE_STEP
	    	rootPart.CFrame = CFrame.new(newPosition, targetRoot.Position)
	    end
    end)
end


-- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô GUI
local function updatePlayerList()
	for _, child in ipairs(playerListFrame:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end

	local searchText = searchBox.Text:lower()

	for _, p in ipairs(Players:GetPlayers()) do
		if p ~= player and p.Name:lower():find(searchText) then
			local btn = Instance.new("TextButton")
			btn.Size = UDim2.new(1, 0, 0, 30)
			btn.Text = "üë§ " .. p.Name
			btn.TextColor3 = Color3.new(1, 1, 1)
			btn.Font = Enum.Font.Gotham
			btn.TextSize = 14
			btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
			btn.Parent = playerListFrame
			Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

			btn.MouseButton1Click:Connect(function()
				followPlayer(p)
			end)
		end
	end
end

Players.PlayerAdded:Connect(updatePlayerList)
Players.PlayerRemoving:Connect(updatePlayerList)
searchBox:GetPropertyChangedSignal("Text"):Connect(updatePlayerList)
updatePlayerList()

stopFollowBtn.MouseButton1Click:Connect(stopFollowing)

-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
local function setupCharacter(char)
	local hum = char:WaitForChild("Humanoid")

	hum.Died:Connect(teleportToSmallestServer)
hum.HealthChanged:Connect(function(health)
	if health <= 1 then
		teleportToSmallestServer()
	elseif health < 30 then
		task.delay(2, function()
			-- ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ó‡πÄ‡∏•‡∏û‡∏≠‡∏£‡πå‡∏ï
			if hum.Health > 0 then
				teleportToSmallestServer()
			end
		end)
	end
end)


if player.Character then setupCharacter(player.Character) end
player.CharacterAdded:Connect(setupCharacter)

local MAX_DISTANCE = 1000

local function createHighlightESP(targetPlayer)
	if targetPlayer == Players.LocalPlayer then return end

	local function addHighlight(char)
		if not char:FindFirstChild("FullBodyHighlight") then
			local highlight = Instance.new("Highlight")
			highlight.Name = "FullBodyHighlight"
			highlight.FillColor = Color3.fromRGB(255, 0, 0)
			highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
			highlight.FillTransparency = 0.3
			highlight.OutlineTransparency = 0
			highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
			highlight.Adornee = char
			highlight.Parent = char

			-- Optional: ‡πÄ‡∏û‡∏¥‡πà‡∏° BillboardGui ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ä‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
			if not char:FindFirstChild("ESPName") then
				local bb = Instance.new("BillboardGui")
				bb.Name = "ESPName"
				bb.Adornee = char:FindFirstChild("HumanoidRootPart")
				bb.AlwaysOnTop = true
				bb.Size = UDim2.new(0, 100, 0, 20)
				bb.StudsOffset = Vector3.new(0, 3, 0)
				bb.MaxDistance = MAX_DISTANCE
				bb.Parent = char

				local name = Instance.new("TextLabel")
				name.Size = UDim2.new(1, 0, 1, 0)
				name.BackgroundTransparency = 1
				name.Text = "üî¥ " .. targetPlayer.Name
				name.TextColor3 = Color3.fromRGB(255, 0, 0)
				name.TextScaled = true
				name.Font = Enum.Font.GothamBold
				name.Parent = bb
			end
		end
	end

	local function updateVisibilityLoop(char)
		local highlight = char:FindFirstChild("FullBodyHighlight")
		if not highlight then return end

		RunService.RenderStepped:Connect(function()
			local root = char:FindFirstChild("HumanoidRootPart")
			if not root then return end

			local distance = (root.Position - workspace.CurrentCamera.CFrame.Position).Magnitude
			highlight.Enabled = distance <= MAX_DISTANCE
		end)
	end

	if targetPlayer.Character then
		addHighlight(targetPlayer.Character)
		updateVisibilityLoop(targetPlayer.Character)
	end

	targetPlayer.CharacterAdded:Connect(function(char)
		repeat task.wait() until char:FindFirstChild("HumanoidRootPart")
		addHighlight(char)
		updateVisibilityLoop(char)
	end)
end

-- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
for _, plr in ipairs(Players:GetPlayers()) do
	createHighlightESP(plr)
end
Players.PlayerAdded:Connect(createHighlightESP)
